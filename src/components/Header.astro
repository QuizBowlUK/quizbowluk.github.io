---
import { Astronav, Dropdown, DropdownItems, MenuItems } from "astro-navbar";
import { Image } from "astro:assets";
import logo from "../assets/logo-cropped.png";
import ChevronDown from "./icons/ChevronDown.astro";
import Hamburger from "./icons/Hamburger.astro";
---

<Astronav>
  <MenuItems class="flex justify-between gap-x-8 px-10 py-2">
    <div class="flex flex-1 items-center">
      <a href="/">
        <Image src={logo} alt="UK Quizbowl" class="h-8 w-auto" />
      </a>
    </div>
    <ul
      class="hidden list-none items-center justify-center gap-x-12 pl-0 text-lg md:flex"
    >
      <li><a href="/blog" class="text-inherit no-underline">Blog</a></li>
      <li>
        <Dropdown class="group pl-0">
          <!-- TODO: investigate why there is padding on the left -->
          <button class="flex items-center text-lg text-inherit">
            <span>Resources</span>
            <ChevronDown
              class="size-5 transform transition-transform duration-200 group-open:rotate-180 md:ml-2"
            />
          </button>
          <DropdownItems>
            <div class="navbar-dropdown">
              <a href="/resources/intro-to-qb" class="dropdown-item">
                Introduction to quizbowl
              </a>
              <a href="/resources/discord" class="dropdown-item">Discord</a>
              <a href="/resources/societies" class="dropdown-item">
                University quiz societies
              </a>
              <a href="/resources/study-resources" class="dropdown-item">
                Study resources
              </a>
              <a href="/resources/forums" class="dropdown-item">
                Quizbowl forums
              </a>
              <a href="/resources/statistics" class="dropdown-item">
                Statistics
              </a>
              <a href="/resources/hosting" class="dropdown-item">
                Tournament hosting guide
              </a>
              <a href="/resources/glossary" class="dropdown-item">
                Quizbowl glossary
              </a>
            </div>
          </DropdownItems>
        </Dropdown>
      </li>
      <li>
        <Dropdown class="group pl-0">
          <!-- TODO: investigate why there is padding on the left -->
          <button class="flex items-center text-lg text-inherit">
            <span>Conduct</span>
            <ChevronDown
              class="size-5 transform transition-transform duration-200 group-open:rotate-180 md:ml-2"
            />
          </button>
          <DropdownItems>
            <div class="navbar-dropdown">
              <a
                href="https://docs.google.com/forms/d/e/1FAIpQLSfL6gCjXK5XUGbuioxjELdWKyPRf9prlOaQsvAwcigTUfWp7g/viewform"
                class="dropdown-item"
              >
                Safeguarding reporting form
              </a>
              <a href="/conduct/cheating" class="dropdown-item">
                Cheating reporting form
              </a>
              <a href="/conduct/conduct" class="dropdown-item">
                Code of conduct
              </a>
            </div>
          </DropdownItems>
        </Dropdown>
      </li>
      <li>Videos</li>
      <li>About us</li>
    </ul>
    <div class="flex flex-1 items-center justify-end">
      <label
        for="mobile-menu-toggle"
        class="text-dark cursor-pointer p-2 md:hidden"
        aria-label="Open menu"
      >
        <Hamburger class="h-6 w-6" />
      </label>
    </div>
  </MenuItems>
</Astronav>

<!-- Hidden checkbox for menu toggle -->
<input
  type="checkbox"
  id="mobile-menu-toggle"
  class="peer sr-only md:hidden"
  aria-hidden="true"
/>

<!-- Mobile Slide Menu -->
<div
  id="mobile-menu"
  class="bg-ukqb-red-bg fixed inset-y-0 right-0 z-40 w-64 translate-x-full transform shadow-lg transition-transform duration-300 peer-checked:translate-x-0 md:hidden"
>
  <div class="border-dark flex items-center justify-between border-b px-4 py-2">
    <div class="text-lg font-bold">Menu</div>
    <label for="mobile-menu-toggle" class="text-dark cursor-pointer p-2">
      <span class="sr-only">Close menu</span>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width={2}
          d="M6 18L18 6M6 6l12 12"
        >
        </path>
      </svg>
    </label>
  </div>
  <nav class="px-4 py-2">
    <ul class="space-y-4 pl-0">
      <li class="text-lg">
        <a href="/blog" class="mb-2 font-bold">Blog</a>
      </li>
      <li class="text-lg">
        <div class="mb-2 font-bold">Resources</div>
        <ul class="ml-4 space-y-2 pl-0">
          <li>
            <a href="/resources/intro-to-qb">Introduction to quizbowl</a>
          </li>
          <li>
            <a href="/resources/discord">Discord</a>
          </li>
          <li>
            <a href="/resources/societies">University quiz societies</a>
          </li>
          <li>
            <a href="/resources/study-resources">Study resources</a>
          </li>
          <li>
            <a href="/resources/forums">Quizbowl forums</a>
          </li>
          <li>
            <a href="/resources/statistics">Statistics</a>
          </li>
          <li>
            <a href="/resources/hosting">Tournament hosting guide</a>
          </li>
          <li>
            <a href="/resources/glossary">Quizbowl glossary</a>
          </li>
        </ul>
      </li>
      <li class="text-lg">
        <div class="mb-2 font-bold">Conduct</div>
        <ul class="ml-4 space-y-2 pl-0">
          <li>
            <a
              href="https://docs.google.com/forms/d/e/1FAIpQLSfL6gCjXK5XUGbuioxjELdWKyPRf9prlOaQsvAwcigTUfWp7g/viewform"
            >
              Safeguarding reporting form
            </a>
          </li>
          <li>
            <a href="/conduct/cheating">Cheating reporting form</a>
          </li>
          <li>
            <a href="/conduct/conduct">Code of conduct</a>
          </li>
        </ul>
      </li>
      <li class="text-lg">
        <a href="/videos" class="mb-2 font-bold">Videos</a>
      </li>
      <li class="text-lg">
        <a href="/about" class="mb-2 font-bold">About us</a>
      </li>
    </ul>
  </nav>
</div>

<!-- Overlay for Mobile Menu -->
<label
  for="mobile-menu-toggle"
  class="pointer-events-none fixed inset-0 z-30 bg-black opacity-0 transition-opacity duration-300 peer-checked:pointer-events-auto peer-checked:opacity-50"
  aria-hidden="true"
>
</label>

<style>
  a,
  a:hover,
  a:focus,
  a:visited {
    @apply text-inherit no-underline;
  }
  li {
    @apply list-none;
  }
</style>
